const popupTriggerButtons=document.querySelectorAll("[data-popup-trigger]"),popup=document.querySelector(".pop-up__wrapper"),popUpWrapper=document.querySelector(".pop-up"),popupCloseButton=document.querySelector(".pop-up__close");function openPopUp(){popup.style.display="flex"}function closePopUp(){popup.style.display="none"}const popupTriggerButtonsArray=Array.from(popupTriggerButtons),inputs=(popupTriggerButtonsArray.forEach(p=>{p.addEventListener("click",function(){openPopUp()})}),document.addEventListener("click",function(p){popUpWrapper.contains(p.target)||popupTriggerButtonsArray.includes(p.target)||closePopUp()}),document.addEventListener("keydown",function(p){"Escape"===p.key&&closePopUp()}),popupCloseButton.addEventListener("click",()=>{closePopUp()}),document.querySelectorAll(".pop-up__input")),popupSubmitButton=document.querySelector('input[type="submit"]'),tel=document.querySelector('input[type="tel"]'),popUpErrors=document.querySelectorAll(".pop-up-error-message"),popUpEmailError=document.getElementById("emailError"),popUpTelError=document.getElementById("phoneError"),popUpNameError=document.getElementById("nameError");function popUpFormData(){const e={};inputs.forEach(p=>{"submit"!==p.type&&(e[p.name]=p.value)}),fetch("./popUpForm.php",{method:"POST",body:e})}function clearAllInputs(){inputs.forEach(p=>{p.value=""})}function popupEmailValidate(){const o=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;let r=!0;return inputs.forEach(p=>{var e;if("email"===p.type)return""===(e=p.value.trim())?(popUpEmailError.innerHTML="Required",r=!1,void p.classList.add("pop-up-error-input")):o.test(e)?(popUpEmailError.innerHTML="",void p.classList.remove("pop-up-error-input")):(popUpEmailError.innerHTML="Invalid Email",r=!1,void p.classList.add("pop-up-error-input"))}),r}function popupNameValidate(){let e=!0;return inputs.forEach(p=>{if("name"===p.name){if(""===p.value.trim())return e=!1,popUpNameError.innerHTML="Required",void p.classList.add("pop-up-error-input");e=!0,popUpNameError.innerHTML="",p.classList.remove("pop-up-error-input")}}),e}tel.addEventListener("input",p=>{tel.value=tel.value.replace(/[^\d.]/g,"")}),popupSubmitButton.addEventListener("click",function(p){p.preventDefault();var p=popupEmailValidate(),e=popupNameValidate();p&&e&&(popUpFormData(),console.log("all ok"),closePopUp(),clearAllInputs())});